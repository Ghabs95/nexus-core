# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

---

## [Unreleased]

### Added
- **Slack Integration** — Added first-class Slack support via `SlackEventHandlerPlugin` (EventBus subscriber for 7 workflow lifecycle events, mrkdwn formatting) and `SlackInteractivePlugin` (Socket Mode via `slack-bolt`; no public URL required). Adds `SlackNotificationChannel` adapter. Requires `slack-bolt>=1.18` optional dependency (`pip install nexus-core[slack]`) ([#82](https://github.com/Ghabs95/nexus-core/issues/82)).
- **Configurable Storage Adapters** — Introduced a unified configuration mechanism for storage backends (File and PostgreSQL) via `WorkflowStateEnginePlugin`. Users can now switch backends using the `storage_type` configuration key or the `NEXUS_STORAGE_TYPE` environment variable ([#65](https://github.com/Ghabs95/nexus-core/issues/65)).
- **PostgreSQL Environment Variable Support** — Added `NEXUS_STORAGE_DSN` for secure PostgreSQL connection management, avoiding plaintext credentials in configuration files.
- **YAML Workflow Orchestration** — Introduced `YamlWorkflowLoader` for loading and validating workflow definitions from YAML. This enables complex multi-step AI workflows with support for parallel execution, conditional branching, and retry policies ([#62](https://github.com/Ghabs95/nexus-core/issues/62)).
- **Declarative Orchestration (v2)** — Introduced a versioned `orchestration` block in workflow YAML, allowing declarative control over polling intervals, completion scanning, agent timeouts, auto-chaining, and retry policies. Refactored `ProcessOrchestrator` to consume this configuration, removing hardcoded behavior from host applications ([#90](https://github.com/Ghabs95/nexus-core/issues/90)).
- **Strict YAML Validation** — `YamlWorkflowLoader` now performs strict boolean parsing and canonical workspace containment checks for completion globs to prevent security escapes.
- **Orchestration Runtime Contract** — Added `WorkflowOrchestrationConfig` and `OrchestrationRuntime` protocol to standardize how host applications interact with the workflow lifecycle.
- **Schema Validation** — `YamlWorkflowLoader` performs comprehensive schema validation before instantiation, ensuring `agent_type`, `retry_policy`, and `parallel` groups are correctly defined.
- **Retry Policies in YAML** — Workflow steps can now define a `retry_policy` block in YAML, supporting `max_retries`, `backoff` strategy (exponential, linear, constant), and `initial_delay`.
- **Parallel Step Execution Foundation** — Added `parallel` field to YAML step definitions and `WorkflowStep.parallel_with` to the core model. Introduced `WorkflowEngine.get_runnable_steps()` to identify steps that can be executed concurrently.
- **Enhanced YAML Loading** — `YamlWorkflowLoader` exported via `nexus.core` for a cleaner public API. Support for `strict` mode to promote schema warnings to errors during loading.

### Changed
- `WorkflowDefinition.from_dict()` now parses `retry_policy.max_retries` from YAML into `WorkflowStep.retry`, while maintaining backward compatibility for explicit `retry` integer fields.
- `WorkflowStep` model updated with `parallel_with: List[str]` field to track concurrent execution dependencies.

### Security
- **Safe YAML Loading** — All YAML loading now exclusively uses `yaml.safe_load()` to prevent arbitrary code execution vulnerabilities from untrusted YAML content.

---

_Generated by @Writer — nexus-core issue [#62](https://github.com/Ghabs95/nexus-core/issues/62)_
